//Map settings
Gmaps4Rails.map_options.disableDefaultUI=!1,Gmaps4Rails.map_options.disableDoubleClickZoom=!1,Gmaps4Rails.map_options.type="ROADMAP",Gmaps4Rails.markers_conf.clusterer_gridSize=50,Gmaps4Rails.markers_conf.clusterer_maxZoom=5,Gmaps4Rails.markers_conf.custom_cluster_pictures=null,Gmaps4Rails.markers_conf.custom_infowindow_class=null,Gmaps4Rails.polygons_conf={strokeColor:"#FFAA00",strokeOpacity:.8,strokeWeight:2,fillColor:"#000000",fillOpacity:.35},Gmaps4Rails.polylines_conf={strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2},Gmaps4Rails.circles_conf={fillColor:"#00AAFF",fillOpacity:.35,strokeColor:"#FFAA00",strokeOpacity:.8,strokeWeight:2,clickable:!1,zIndex:null},Gmaps4Rails.direction_conf={panel_id:null,display_panel:!1,origin:null,destination:null,waypoints:[],optimizeWaypoints:!1,unitSystem:"METRIC",avoidHighways:!1,avoidTolls:!1,region:null,travelMode:"DRIVING"},Gmaps4Rails.createPoint=function(a,b){return new google.maps.Point(a,b)},Gmaps4Rails.createLatLng=function(a,b){return new google.maps.LatLng(a,b)},Gmaps4Rails.createLatLngBounds=function(){return new google.maps.LatLngBounds},Gmaps4Rails.createMap=function(){return new google.maps.Map(document.getElementById(Gmaps4Rails.map_options.id),{maxZoom:Gmaps4Rails.map_options.maxZoom,minZoom:Gmaps4Rails.map_options.minZoom,zoom:Gmaps4Rails.map_options.zoom,center:Gmaps4Rails.createLatLng(this.map_options.center_latitude,this.map_options.center_longitude),mapTypeId:google.maps.MapTypeId[this.map_options.type],mapTypeControl:Gmaps4Rails.map_options.mapTypeControl,disableDefaultUI:Gmaps4Rails.map_options.disableDefaultUI,disableDoubleClickZoom:Gmaps4Rails.map_options.disableDoubleClickZoom,draggable:Gmaps4Rails.map_options.draggable})},Gmaps4Rails.createMarkerImage=function(a,b,c,d,e){return new google.maps.MarkerImage(a,b,c,d,e)},Gmaps4Rails.createSize=function(a,b){return new google.maps.Size(a,b)},Gmaps4Rails.createMarker=function(a){var b=Gmaps4Rails.createLatLng(a.Lat,a.Lng);if(a.marker_picture==="")return new google.maps.Marker({position:b,map:Gmaps4Rails.map,title:a.marker_title,draggable:a.marker_draggable});var c=this.createImageAnchorPosition(a.marker_anchor),d=this.createImageAnchorPosition(a.shadow_anchor),e=this.createOrRetrieveImage(a.marker_picture,a.marker_width,a.marker_height,c),f=this.createOrRetrieveImage(a.shadow_picture,a.shadow_width,a.shadow_height,d);return new google.maps.Marker({position:b,map:this.map,icon:e,title:a.marker_title,draggable:a.marker_draggable,shadow:f})},Gmaps4Rails.includeMarkerImage=function(a,b){for(var c=0;c<a.length;c++)if(a[c].url==b)return c;return!1},Gmaps4Rails.createOrRetrieveImage=function(a,b,c,d){if(a===""||a===null)return null;var e=this.includeMarkerImage(this.markerImages,a);switch(e){case!1:var f=Gmaps4Rails.createMarkerImage(a,Gmaps4Rails.createSize(b,c),null,d,null);return this.markerImages.push(f),f;default:return typeof e=="number"?this.markerImages[e]:!1}},Gmaps4Rails.clearMarkers=function(){for(var a=0;a<this.markers.length;++a)this.clearMarker(this.markers[a])},Gmaps4Rails.showMarkers=function(){for(var a=0;a<this.markers.length;++a)this.showMarker(this.markers[a])},Gmaps4Rails.hideMarkers=function(){for(var a=0;a<this.markers.length;++a)this.hideMarker(this.markers[a])},Gmaps4Rails.clearMarker=function(a){a.serviceObject.setMap(null)},Gmaps4Rails.showMarker=function(a){a.serviceObject.setVisible(!0)},Gmaps4Rails.hideMarker=function(a){a.serviceObject.setVisible(!1)},Gmaps4Rails.extendBoundsWithMarkers=function(){for(var a=0;a<Gmaps4Rails.markers.length;++a)Gmaps4Rails.boundsObject.extend(Gmaps4Rails.markers[a].serviceObject.position)},Gmaps4Rails.createClusterer=function(a){return new MarkerClusterer(Gmaps4Rails.map,a,{maxZoom:Gmaps4Rails.markers_conf.clusterer_maxZoom,gridSize:Gmaps4Rails.markers_conf.clusterer_gridSize,styles:Gmaps4Rails.customClusterer()})},Gmaps4Rails.clearClusterer=function(){this.markerClusterer.clearMarkers()},Gmaps4Rails.clusterize=function(){if(this.markers_conf.do_clustering===!0){this.markerClusterer!==null&&this.clearClusterer();var a=[];for(var b=0;b<this.markers.length;++b)a.push(this.markers[b].serviceObject);this.markerClusterer=Gmaps4Rails.createClusterer(a)}},Gmaps4Rails.createInfoWindow=function(a){var b;if(this.markers_conf.custom_infowindow_class===null&&Gmaps4Rails.exists(a.description))b=new google.maps.InfoWindow({content:a.description}),google.maps.event.addListener(a.serviceObject,"click",this.openInfoWindow(b,a.serviceObject));else if(this.exists(a.description)){var c=document.createElement("div");c.setAttribute("class",this.markers_conf.custom_infowindow_class),c.innerHTML=a.description,b=new InfoBox(Gmaps4Rails.infobox(c)),google.maps.event.addListener(a.serviceObject,"click",this.openInfoWindow(b,a.serviceObject))}},Gmaps4Rails.openInfoWindow=function(a,b){return function(){Gmaps4Rails.visibleInfoWindow&&Gmaps4Rails.visibleInfoWindow.close(),a.open(Gmaps4Rails.map,b),Gmaps4Rails.visibleInfoWindow=a}},Gmaps4Rails.fitBounds=function(){this.map.fitBounds(this.boundsObject)},Gmaps4Rails.centerMapOnUser=function(){Gmaps4Rails.map.setCenter(Gmaps4Rails.userLocation)}