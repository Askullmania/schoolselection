%h2.bold Welcome to the BPS School Discovery Tool

%p.large
  %span.bold
    DiscoverBPS 
  allows parents and students to find eligible schools and create a customized list of favorites. To get started, please enter your home address and the student’s upcoming grade level in the search form, below, and then click “Search.”
  
%table.slider
  %tr
    %td.valign-top
      #search-form
        %h2.bold.white Find Your Schools
        - session[:address].blank? ? session[:address] = '26 Court St' : session[:address]
        - session[:zipcode].blank? ? session[:zipcode] = '02108' : session[:zipcode]
        - session[:grade_level].blank? ? session[:grade_level] = 'K1' : session[:grade_level]
        = form_tag('/schools', :method => :get) do
          = hidden_field_tag 'view', 'list'
          .label.white
            Address:
          = text_field_tag :address, session[:address], :class => 'address'
          %br/
          .label.white
            Zipcode:
          = text_field_tag :zipcode, session[:zipcode], :class => 'zipcode'
          %br/
          .label.white
            Grade:
          = select_tag :grade_level, options_from_collection_for_select(GradeLevel.all, :number, :number, :selected => session[:grade_level]), :class => 'search'
          %br/
          .label.white
            Sibling School:
          = select_tag :sibling_school, options_from_collection_for_select(School.all(:order => 'name'), :id, :name, :selected => session[:sibling_school]), :include_blank => true, :class => 'search'
          .search_button
            = submit_tag "Search"
    %td.valign-top
      %h2.bold.white Featured Schools
      - featured_schools = School.all.find_all {|x| x.hidden_gem? }
      .anythingSlider
        .wrapper
          %ul.horizontal-list
            - featured_schools.each do |school|
              - if school.image.present?
                %li
                  %table.no-padding
                    %tr
                      %td.valign-top.no-padding
                        = image_tag(school.image(:slider))
                        .slider_label
                          = school.name
        
%div.clear-both.italic
  %p== Please note that this tool cannot be used to register a student; it is intended only to support your efforts to learn about your options. Visit #{link_to 'www.bostonpublicschools.org/register', 'http://www.bostonpublicschools.org/register'} for more on school registration. 
  %p== This application has just been released.  If you encounter any problems, please #{mail_to 'boston@codeforamerica.org', 'let us know'}.
  
- content_for :scripts do
  = javascript_tag do
    function formatText(index, panel) {return index + "";}
    $(function () {
    $('.anythingSlider').anythingSlider({
    easing: "swing",
    autoPlay: true,
    startStopped: false,
    delay: 6000,
    animationTime: 600,
    hashTags: true,
    buildNavigation: false,
    pauseOnHover: true,
    startText: "Start",
    stopText: "Stop",
    navigationFormatter: null
    });    
    });