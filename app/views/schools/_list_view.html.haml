#sidebar
  #nav
    %h3.bold
      Map View
    = link_to static_schools_map(150, 125), schools_path(address: params[:address], zipcode: params[:zipcode], grade_level: params[:grade_level], :sibling_school => params[:sibling_school], view: 'map', :class => 'sidebar-nav')

  #mypicks
    = render :partial => 'favorites'
    
#table-nav
  = link_to 'Overview', switch_tab_schools_path(:tab => 'overview'), :remote => true, :id => 'overview-tab', :class => 'table-nav active'
  = link_to 'Transportation', switch_tab_schools_path(:tab => 'transportation'), :remote => true, :id => 'transportation-tab', :class => 'table-nav'
  = link_to 'Academics', switch_tab_schools_path(:tab => 'academics'), :remote => true, :id => 'academics-tab', :class => 'table-nav'
  - if @all_schools.map {|x| x.grade(params[:grade_level]).try(:open_seats) }.try(:compact).try(:present?)
    = link_to 'Admissions', switch_tab_schools_path(:tab => 'admissions'), :remote => true, :id => 'admissions-tab', :class => 'table-nav'
#left-column    
  #page
    %h2.bold
      %span.small.nobold.italic
        == Eligible Schools for:&nbsp;
      == #{@geocoded_address.street_address}, #{@geocoded_address.city}, #{@geocoded_address.state} / Grade #{session[:grade_level]}
  
    = render :partial => 'schools/table/table'

  = render :partial => 'layouts/page_footer'

%script
  $(document).ready(function() {
  var yOffset = $("#sidebar").offset().top - 40;
  $(window).scroll(function() {
  if ($(window).scrollTop() > yOffset) {
  $("#sidebar").css({
  'top': 0,
  'position': 'fixed'
  });
  } else {
  $("#sidebar").css({
  'top': yOffset + 'px',
  'position': 'absolute'
  });
  }
  });
  });
      
